// Language translations
const translations = {
  id: {
    'page-title': 'Erlangga Agro Bisma - Penyedia Produk Pertanian Premium untuk Ekspor',
    'page-description': 'Lucytos menghadirkan kentang premium yang tidak hanya lezat dan pulen, tetapi juga sehat, bernutrisi serta aman untuk dikonsumsi',
    'nav-home': 'Beranda',
    'nav-about': 'Tentang',
    'nav-products': 'Produk',
    'nav-market': 'Pasar',
    'nav-brand': 'Merek',
    'nav-gallery': 'Galeri',
    'nav-contact': 'Kontak',
    'hero-title': 'Penyedia Produk Pertanian Premium',
    'hero-subtitle': 'Kentang, Wortel, dan Kubis Berkualitas Tinggi untuk Ekspor Internasional',
    'hero-btn-products': 'Lihat Produk',
    'hero-btn-contact': 'Hubungi Kami',
    'about-title': 'Tentang Erlangga Agro Bisma',
    'about-subtitle': 'Membangun masa depan pertanian yang berkelanjutan',
    'about-desc': 'Erlangga Agro Bisma adalah perusahaan terdepan dalam penyediaan produk pertanian berkualitas tinggi. Dengan pengalaman bertahun-tahun, kami mengkhususkan diri dalam produksi dan distribusi kentang, wortel, dan kubis untuk pasar ekspor internasional.',
    'vision-title': 'Visi',
    'vision-text': 'Menjadi perusahaan agribisnis terkemuka yang menyediakan produk pertanian berkualitas tinggi untuk pasar global dengan komitmen pada keberlanjutan dan inovasi.',
    'mission-title': 'Misi',
    'mission-text': '<li>Menghasilkan produk pertanian berkualitas premium dengan standar internasional</li><li>Memberikan layanan terbaik kepada pelanggan domestik dan internasional</li><li>Mendukung petani lokal melalui program kemitraan yang berkelanjutan</li><li>Menerapkan teknologi modern dalam setiap aspek produksi</li>',
    'products-title': 'Produk Unggulan',
    'products-subtitle': 'Produk pertanian berkualitas tinggi untuk ekspor',
    'product-potato-title': 'Kentang Premium',
    'product-potato-desc': 'Kentang berkualitas ekspor dengan tekstur sempurna dan kandungan nutrisi tinggi.',
    'product-carrot-title': 'Wortel Segar',
    'product-carrot-desc': 'Wortel segar dengan warna cerah, tekstur renyah, dan rasa manis alami.',
    'product-cabbage-title': 'Kubis Hijau',
    'product-cabbage-desc': 'Kubis hijau segar dengan daun yang rapat dan kandungan vitamin tinggi.',
    'product-sizes-label': 'Ukuran:',
    'order-btn': 'Pesan Sekarang',
    'market-title': 'Jangkauan Pasar',
    'market-subtitle': 'Melayani kebutuhan ekspor ke berbagai negara',
    'stat-countries': 'Negara Tujuan',
    'stat-tons': 'Ton/Bulan',
    'stat-quality': 'Kualitas Premium',
    'stat-service': 'Layanan Pelanggan',
    'market-desc': 'Produk kami telah dipercaya oleh importir dan distributor di Asia Tenggara, Timur Tengah, dan Eropa. Dengan standar kualitas internasional dan proses packaging yang modern, kami memastikan produk sampai dalam kondisi optimal.',
    'brand-title': 'Merek & Sertifikasi',
    'brand-subtitle': 'Kualitas terjamin dengan sertifikasi internasional',
    'brand-fresh': 'FreshAgro',
    'brand-export': 'ExportVeg',
    'cert-organic': 'Sertifikat Organik',
    'cert-export': 'Perizinan Berusaha Berbasis Resiko',
    'gallery-title': 'Galeri',
    'gallery-subtitle': 'Dokumentasi fasilitas dan produk kami',
    'video-not-supported': 'Browser Anda tidak mendukung video HTML5.',
    'gallery-facility': 'Penyiraman Tanaman',
    'gallery-packaging': 'Proses Packaging',
    'gallery-quality': 'Perawatan Tanaman Kentang',
    'gallery-storage': 'Fasilitas Penyimpanan',
    'gallery-harvest': 'Proses Panen',
    'gallery-export': 'Loading Ekspor',
    'contact-title': 'Hubungi Kami',
    'contact-subtitle': 'Siap melayani kebutuhan ekspor produk pertanian Anda',
    'contact-address-title': 'Alamat',
    'contact-address': 'Dusun Tempuran Desa Campursari<br>Campursari, Kejajar, Wonosobo, Indonesia',
    'contact-hours-title': 'Jam Operasional',
    'contact-hours': 'Senin - Jumat: 08.00 - 17.00 WIB<br>Sabtu: 08.00 - 12.00 WIB',
    'contact-form-title': 'Kirim Pesan',
    'form-name': 'Nama',
    'form-email': 'Email',
    'form-phone': 'Nomor Telepon',
    'form-message': 'Pesan',
    'form-submit': 'Kirim Pesan',
    'footer-desc': 'Penyedia produk pertanian berkualitas tinggi untuk ekspor internasional.',
    'footer-company': 'Perusahaan',
    'footer-about': 'Tentang Kami',
    'footer-products': 'Produk',
    'footer-market': 'Pasar',
    'footer-services': 'Layanan',
    'footer-export': 'Ekspor',
    'footer-consulting': 'Konsultasi',
    'footer-partnership': 'Kemitraan',
    'footer-contact': 'Kontak',
    'footer-copyright': '© 2025 Erlangga Agro Bisma. Semua hak cipta dilindungi.'
  },
  en: {
    'page-title': 'Erlangga Agro Bisma - Premium Agricultural Products Provider for Export',
    'page-description': 'Lucytos presents premium potatoes that are not only delicious and soft, but also healthy, nutritious, and safe to consume.',
    'nav-home': 'Home',
    'nav-about': 'About',
    'nav-products': 'Products',
    'nav-market': 'Market',
    'nav-brand': 'Brand',
    'nav-gallery': 'Gallery',
    'nav-contact': 'Contact',
    'hero-title': 'Premium Agricultural Products Provider',
    'hero-subtitle': 'High-Quality Potatoes, Carrots, and Cabbage for International Export',
    'hero-btn-products': 'View Products',
    'hero-btn-contact': 'Contact Us',
    'about-title': 'About Erlangga Agro Bisma',
    'about-subtitle': 'Building a sustainable agricultural future',
    'about-desc': 'Erlangga Agro Bisma is a leading company in providing high-quality agricultural products. With years of experience, we specialize in the production and distribution of potatoes, carrots, and cabbage for international export markets.',
    'vision-title': 'Vision',
    'vision-text': 'To become a leading agribusiness company that provides high-quality agricultural products for the global market with a commitment to sustainability and innovation.',
    'mission-title': 'Mission',
    'mission-text': '<li>Produce premium agricultural products with international standards</li><li>Provide the best service to domestic and international customers</li><li>Support local farmers through sustainable partnership programs</li><li>Apply modern technology in every aspect of production</li>',
    'products-title': 'Featured Products',
    'products-subtitle': 'High-quality agricultural products for export',
    'product-potato-title': 'Premium Potatoes',
    'product-potato-desc': 'Export-quality potatoes with perfect texture and high nutritional content.',
    'product-carrot-title': 'Fresh Carrots',
    'product-carrot-desc': 'Fresh carrots with bright color, crisp texture, and natural sweet taste.',
    'product-cabbage-title': 'Green Cabbage',
    'product-cabbage-desc': 'Fresh green cabbage with tight leaves and high vitamin content.',
    'product-sizes-label': 'Sizes:',
    'order-btn': 'Order Now',
    'market-title': 'Market Reach',
    'market-subtitle': 'Serving export needs to various countries',
    'stat-countries': 'Destination Countries',
    'stat-tons': 'Tons/Month',
    'stat-quality': 'Premium Quality',
    'stat-service': 'Customer Service',
    'market-desc': 'Our products are trusted by importers and distributors in Southeast Asia, Middle East, and Europe. With international quality standards and modern packaging processes, we ensure products arrive in optimal condition.',
    'brand-title': 'Brands & Certifications',
    'brand-subtitle': 'Quality assured with international certifications',
    'brand-fresh': 'FreshAgro',
    'brand-export': 'ExportVeg',
    'cert-organic': 'Organic Certification',
    'cert-export': 'Risk-Based Business Licensing',
    'gallery-title': 'Gallery',
    'gallery-subtitle': 'Documentation of our facilities and products',
    'video-not-supported': 'Your browser does not support HTML5 video.',
    'gallery-facility': 'watering plants',
    'gallery-packaging': 'Packaging Process',
    'gallery-quality': 'Perawatan Tanaman Kentang',
    'gallery-storage': 'Storage Facility',
    'gallery-harvest': 'Harvest Process',
    'gallery-export': 'Export Loading',
    'contact-title': 'Contact Us',
    'contact-subtitle': 'Ready to serve your agricultural export product needs',
    'contact-address-title': 'Address',
    'contact-address': 'Dusun Tempuran Desa Campursari<br>Campursari, Kejajar, Wonosobo, Indonesia, West Java, Indonesia',
    'contact-hours-title': 'Operating Hours',
    'contact-hours': 'Monday - Friday: 08.00 - 17.00 WIB<br>Saturday: 08.00 - 12.00 WIB',
    'contact-form-title': 'Send Message',
    'form-name': 'Name',
    'form-email': 'Email',
    'form-phone': 'Phone Number',
    'form-message': 'Message',
    'form-submit': 'Send Message',
    'footer-desc': 'Provider of high-quality agricultural products for international export.',
    'footer-company': 'Company',
    'footer-about': 'About Us',
    'footer-products': 'Products',
    'footer-market': 'Market',
    'footer-services': 'Services',
    'footer-export': 'Export',
    'footer-consulting': 'Consulting',
    'footer-partnership': 'Partnership',
    'footer-contact': 'Contact',
    'footer-copyright': '© 2025 Erlangga Agro Bisma. All rights reserved.'
  }
};

// Navigation functionality
document.addEventListener('DOMContentLoaded', function() {
  const hamburger = document.querySelector('.hamburger');
  const navMenu = document.querySelector('.nav-menu');
  const navLinks = document.querySelectorAll('.nav-link');
  const languageSelector = document.getElementById('languageSelector');

  // Mobile menu toggle
  hamburger.addEventListener('click', function() {
    hamburger.classList.toggle('active');
    navMenu.classList.toggle('active');
  });

  // Close mobile menu when clicking on a link
  navLinks.forEach(link => {
    link.addEventListener('click', function() {
      hamburger.classList.remove('active');
      navMenu.classList.remove('active');
    });
  });

  // Active nav link highlighting
  function setActiveNavLink() {
    const sections = document.querySelectorAll('section[id]');
    const scrollPosition = window.scrollY + 100;

    sections.forEach(section => {
      const sectionTop = section.offsetTop;
      const sectionHeight = section.offsetHeight;
      const sectionId = section.getAttribute('id');
      
      if (scrollPosition >= sectionTop && scrollPosition < sectionTop + sectionHeight) {
        navLinks.forEach(link => {
          link.classList.remove('active');
          if (link.getAttribute('href') === `#${sectionId}`) {
            link.classList.add('active');
          }
        });
      }
    });
  }

  // Scroll event listener
  window.addEventListener('scroll', setActiveNavLink);

  // Smooth scrolling for anchor links
  document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function(e) {
      e.preventDefault();
      const target = document.querySelector(this.getAttribute('href'));
      if (target) {
        const offsetTop = target.offsetTop - 80;
        window.scrollTo({
          top: offsetTop,
          behavior: 'smooth'
        });
      }
    });
  });

  // Language switcher
  languageSelector.addEventListener('change', function() {
    const selectedLanguage = this.value;
    changeLanguage(selectedLanguage);
    localStorage.setItem('selectedLanguage', selectedLanguage);
  });

  // Load saved language preference
  const savedLanguage = localStorage.getItem('selectedLanguage') || 'id';
  languageSelector.value = savedLanguage;
  changeLanguage(savedLanguage);

  // Contact form handler
  const contactForm = document.getElementById('contactForm');
  contactForm.addEventListener('submit', function(e) {
    e.preventDefault();
    
    const formData = new FormData(this);
    const name = formData.get('name');
    const email = formData.get('email');
    const phone = formData.get('phone');
    const message = formData.get('message');
    
    // Create WhatsApp message
    const whatsappMessage = `Halo, saya ${name}.\n\nEmail: ${email}\nTelepon: ${phone}\n\nPesan: ${message}`;
    const whatsappUrl = `https://wa.me/6285840179349?text=${encodeURIComponent(whatsappMessage)}`;
    
    // Open WhatsApp
    window.open(whatsappUrl, '_blank');
    
    // Reset form
    this.reset();
    
    // Show success message
    alert(savedLanguage === 'id' ? 'Terima kasih! Anda akan diarahkan ke WhatsApp.' : 'Thank you! You will be redirected to WhatsApp.');
  });

  // Intersection Observer for animations
  const observerOptions = {
    threshold: 0.1,
    rootMargin: '0px 0px -50px 0px'
  };

  const observer = new IntersectionObserver(function(entries) {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.style.animation = 'fadeInUp 0.6s ease-out';
      }
    });
  }, observerOptions);

  // Observe elements for animations
  document.querySelectorAll('.product-card, .brand-item, .gallery-item, .stat-item').forEach(el => {
    observer.observe(el);
  });

  // Image lazy loading
  const images = document.querySelectorAll('img');
  const imageObserver = new IntersectionObserver((entries, observer) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        const img = entry.target;
        img.classList.add('loaded');
        observer.unobserve(img);
      }
    });
  });

  images.forEach(img => {
    imageObserver.observe(img);
  });
});

// Language change function
function changeLanguage(language) {
  const elements = document.querySelectorAll('[data-id]');
  
  elements.forEach(element => {
    const key = element.getAttribute('data-id');
    if (translations[language] && translations[language][key]) {
      if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
        element.placeholder = translations[language][key];
      } else if (key === 'mission-text') {
        element.innerHTML = translations[language][key];
      } else if (key === 'contact-address' || key === 'contact-hours') {
        element.innerHTML = translations[language][key];
      } else {
        element.textContent = translations[language][key];
      }
    }
  });

  // Update page title and meta description
  document.title = translations[language]['page-title'];
  const metaDesc = document.querySelector('meta[name="description"]');
  if (metaDesc) {
    metaDesc.setAttribute('content', translations[language]['page-description']);
  }

  // Update html lang attribute
  document.documentElement.lang = language;
}

// Product image gallery functionality
document.addEventListener('DOMContentLoaded', function() {
  const productCards = document.querySelectorAll('.product-card');
  
  productCards.forEach(card => {
    const sizeImages = card.querySelectorAll('.size-img');
    const mainImage = card.querySelector('.main-image');
    
    sizeImages.forEach(img => {
      img.addEventListener('click', function() {
        const tempSrc = mainImage.src;
        mainImage.src = this.src;
        this.src = tempSrc;
        
        // Add click effect
        this.style.transform = 'scale(1.2)';
        setTimeout(() => {
          this.style.transform = '';
        }, 200);
      });
    });
  });
});

// Scroll to top functionality
window.addEventListener('scroll', function() {
  const scrollButton = document.getElementById('scrollToTop');
  if (window.pageYOffset > 300) {
    if (scrollButton) scrollButton.style.display = 'block';
  } else {
    if (scrollButton) scrollButton.style.display = 'none';
  }
});

// Performance optimization: Debounced scroll handler
function debounce(func, wait) {
  let timeout;
  return function executedFunction(...args) {
    const later = () => {
      clearTimeout(timeout);
      func(...args);
    };
    clearTimeout(timeout);
    timeout = setTimeout(later, wait);
  };
}

const debouncedScrollHandler = debounce(() => {
  setActiveNavLink();
}, 10);

window.addEventListener('scroll', debouncedScrollHandler);
